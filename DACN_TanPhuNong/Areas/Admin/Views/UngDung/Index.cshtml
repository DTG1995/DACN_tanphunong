@{
    ViewBag.Title = "Quản trị";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<section class="content-header">
    <h1>@GlobalRes.Home
        <small>tùy chỉnh trang chủ</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="@Url.Action("Index","Home")"><i class="fa fa-home"></i> @GlobalRes.Home</a></li>
        <li class="active">Quản trị</li>
    </ol>
</section>
<section class="content">
    <div class="row">
        <section class="content" style="min-height: unset; padding-bottom: 0px;">
            <div class="box box-solid">
                <div class="box-header with-border" data-id="1" style="cursor: pointer;">
                    <i class="fa fa-header"></i>
                    <h3 class="box-title">Header</h3>
                    <b class="pull-right"><i class="fa fa-angle-down "></i></b>
                </div>
                <!-- /.box-header -->
                <div class="box-body" data-id="1">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-2  control-label" for="txtTenDN">Tên Doanh Nghiệp </label>
                            <div class="col-sm-10 ">
                                <input class="form-control" name="txtTenDN" id="txtTenDN" value="@ViewBag.NameEnterprise"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="txtMoTa">Mô Tả Ngắn </label>
                            <div class="col-sm-10">
                                <input class="form-control" name="txtMoTa" id="txtMoTa" value="@ViewBag.DesEnterprise"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="file-upload">SlideShow </label>
                            <div class="col-sm-10">
                                <div id="inputSlideShow">
                                    @{
                                        string[] arrSlideShow = ViewBag.SlideShow;
                                    }
                                    @for (int i = 0; i < arrSlideShow.Length; i++)
                                    {
                                        <div class="col-md-10">
                                            <input type="text" value="@arrSlideShow[i]" class="form-control" name="slideShow" id="@("HinhAnh" + i)"/>
                                        </div>
                                        <div class="col-md-2">
                                            <button type="button" onclick="chosseImage('@("HinhAnh" + i)')" class=" btn btn-primary">Chọn hình</button>
                                        </div>
                                    }
                                </div>
                                <div class="pull-left" style="margin-top: 15px;">
                                    <button class="btn btn-default" id="btnThemAnh" onclick="ThemSlideShow(@arrSlideShow.Length)">Thêm ảnh</button>
                                </div>
                            </div>
                            
                        </div>
                        <div class="form-group pull-right">
                            <div class="col-sm-12">
                                <button onclick="SaveHeader()" class="btn btn-primary"><i class="fa fa-save"></i> Lưu thay đổi </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.box-body -->
            </div>
        </section>
    </div>
    <div class="row">
        <section class="content" style="min-height: unset; padding-bottom: 0px;" >
            <div class="box box-solid">
                <div class="box-header with-border" data-id="2" style="cursor: pointer;">
                    <i class="fa fa-paper-plane-o"></i>
                    <h3 class="box-title">@GlobalRes.Grateful_Post</h3>
                    <b class="pull-right"><i class="fa fa-angle-down "></i></b>
                </div>
                <!-- /.box-header -->
                <div class="box-body" data-id="2">
                    <form class="form-horizontal" action="@Url.Action("TriAn","Admin")" method="post">
                        @Html.AntiForgeryToken()
                        <div class="content">
                            <ul class="tabs">
                                <li class="tab-link current" data-tab="tab-1"><img width="40" height="30" src="/images/vi_vuong.png" />@GlobalRes.VietNam </li>
                                <li class="tab-link" data-tab="tab-2"><img width="40" height="30" src="/images/en_vuong.png" />@GlobalRes.English </li>
                            </ul>

                            <div id="tab-1" class="tab-content current">
                                <div class="form-group">
                                    <label class="col-sm-12 control-label" for="triAnVi">Bài viết tri ân </label>
                                    <div class="col-sm-12">
                                        <textarea class="form-control" name="triAnVi" id="triAnVi">@ViewBag.TriAnVi</textarea>
                                    </div>
                                </div>

                            </div>
                            <div id="tab-2" class="tab-content">
                                <div class="form-group">
                                    <label class="col-sm-12 control-label" for="triAnEn">Grateful Content </label>
                                    <div class="col-sm-12">
                                        <textarea class="form-control" name="triAnEn" id="triAnEn">@ViewBag.TriAnEn</textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        

                        <div class="form-group pull-right">
                            <div class="col-sm-12">
                                <button type="submit" class="btn btn-primary"><i class="fa fa-save"></i> Lưu thay đổi </button>
                            </div>
                        </div>
                    </form>
                </div>
                <!-- /.box-body -->
            </div>
        </section>
    </div>
    <div class="row">
        <section class="content" style="min-height: unset; padding-bottom: 0px;">
            <div class="box box-solid">
                <div class="box-header with-border" data-id="1" style="cursor: pointer;">
                    <i class="fa fa-header"></i>
                    <h3 class="box-title">Hình Nổi bật</h3>
                    <b class="pull-right"><i class="fa fa-angle-down "></i></b>
                </div>
                <!-- /.box-header -->
                <div class="box-body" data-id="1">
                    
                    <div class="form-horizontal">
                        
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="file-upload">SlideShow: </label>
                                <div class="col-sm-10">
                                    <div id="inputSlideShow1">
                                        @{
                                            string[] arrSlideShow1 = ViewBag.SlideShow1;
                                        }
                                        @for (int i = 0; i < arrSlideShow1.Length; i++)
                                        {
                                            <div class="col-md-10">
                                                <input type="text" value="@arrSlideShow1[i]" class="form-control" name="slideShow1" id="@("HinhAnh1" + i)" />
                                            </div>
                                            <div class="col-md-2">
                                                <button type="button" onclick="chosseImage('@("HinhAnh1" + i)')" class=" btn btn-primary">Chọn hình</button>
                                            </div>
                                        }
                                    </div>
                                    <div class="pull-left" style="margin-top: 15px;">
                                        <button class="btn btn-default" id="btnThemAnh1" onclick="ThemSlideShow1(@arrSlideShow1.Length)">Thêm ảnh</button>
                                    </div>
                                </div>
                                <div class="form-group pull-right">
                                    <div class="col-sm-12">
                                        <button onclick="SaveFeateredPhotos()" class="btn btn-primary"><i class="fa fa-save"></i> Lưu thay đổi </button>
                                    </div>
                                </div>
                            </div>      
                        
                    </div>
                </div>
                <!-- /.box-body -->
            </div>
        </section>
    </div>




    @*<div class="row">
        <section class="content" style="min-height: unset; padding-bottom: 0px;">
            <div class="box box-solid">
                <div class="box-header with-border" data-id="3" style="cursor: pointer;">
                    <i class="fa fa-id-card-o"></i>
                    <h3 class="box-title">Footer</h3>
                    <b class="pull-right"><i class="fa fa-angle-down "></i></b>
                </div>
                <!-- /.box-header -->
                <div class="box-body" data-id="3">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-12 control-label" for="txtVeChungToi"><i class="fa fa-users"></i> Về chúng tôi </label>
                                <div class="col-sm-12">
                                    <textarea class="form-control" name="txtVeChungToi" id="txtVeChungToi">@ViewBag.VeChungToi</textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-12 control-label" for="txtLienHe"><i class="fa fa-id-card"></i> Liên hệ </label>
                                <div class="col-sm-12">
                                    <textarea class="form-control" name="txtLienHe" id="txtLienHe">@ViewBag.LienHe</textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-12 control-label" for="txtSanPham"><i class="fa fa-product-hunt"></i> Sản phẩm </label>
                                <div class="col-sm-12">
                                    <textarea class="form-control" name="txtSanPham" id="txtSanPham">@ViewBag.SanPhamFooter</textarea>
                                </div>
                            </div>
                        </div>

                        <div class="form-group pull-right">
                            <div class="col-sm-12">
                                <button onclick=" SaveFooter() " class="btn btn-primary"><i class="fa fa-save"></i> Lưu thay đổi </button>
                            </div>
                        </div>
                </div>
                <!-- /.box-body -->
            </div>
        </section>
    </div>*@
    
</section>
<!-- CK Editor -->
@Scripts.Render("~/Scripts/admin/ckeditor/ckeditor.js")

<script>
    $(function () {
        CKEDITOR.replace("triAnVi", {
            filebrowserBrowseUrl: '@Url.Content("~/Areas/Admin/browser/ImageBrowserCkeditor.aspx")',
            filebrowserWindowWidth: '750',
            filebrowserWindowHeight: '600'
        });
        CKEDITOR.replace("triAnEn", {
            filebrowserBrowseUrl: '@Url.Content("~/Areas/Admin/browser/ImageBrowserCkeditor.aspx")',
            filebrowserWindowWidth: '750',
            filebrowserWindowHeight: '600'
        });
      
        
        jQuery(".box-header").click(function () {
            var btnId = $(this).data('id');
            jQuery('.box-body[data-id=' + btnId + ']').toggle();
            if ($('.box-body[data-id=' + btnId + ']').css('display') == 'none') {
                $(this).children().next('b').html("<i class='fa fa-angle-left '></i>");
            }else $(this).children().next('b').html("<i class='fa fa-angle-down '></i>");
        
        });

        
    });
   
    

    function SaveHeader() {
        var NameEnterprise = $("#txtTenDN").val();
        var moTaDN = $("#txtMoTa").val();
        var slideShow = $("input[type='text'][name='slideShow']");
        var strslideShow = "";
        for (var i = 0; i < slideShow.length; i++) {
            if(slideShow[i].value.trim()!="")
                strslideShow += slideShow[i].value + ";";
        }
        strslideShow = strslideShow.substr(0, strslideShow.length - 1);
        $.ajax({
            type: 'POST',
            url: "@Url.Action("SaveHeader","UngDung")",
            data: {
                txtTenDN:NameEnterprise,
                txtMoTa:moTaDN,
                slideShow:strslideShow
        },
        dataType: "text",
        success: function(resultData) {
            alert(resultData);
        }
    });
    }
    function SaveFeateredPhotos(){
       
        var slideShow = $("input[type='text'][name='slideShow1']");
        var strslideShow = "";
        for (var i = 0; i < slideShow.length; i++) {
            if(slideShow[i].value.trim()!="")
                strslideShow += slideShow[i].value + ";";
        }
        strslideShow = strslideShow.substr(0, strslideShow.length - 1);
        $.ajax({
            type: 'POST',
            url: "@Url.Action("SaveFeateredPhotos", "UngDung")",
            data: {
            slideShow1:strslideShow
            },
        dataType: "text",
        success: function(resultData) {
            alert("Luu Thanh Cong");
        }
    });
    }
    function ThemSlideShow(i) {
        $("#inputSlideShow").append(`<div class="col-md-10" >
        <input type="text" value="" class="form-control" name="slideShow" id="HinhAnh`+i+`")"/>
            </div>
            <div class="col-md-2">
                <button type="button" onclick="chosseImage('HinhAnh`+i+`')" class=" btn btn-primary">Chọn hình</button>
            </div>
            `);
    $("#btnThemAnh").attr("onclick", "ThemSlideShow(" + i + 1 + ")");

    }
    function ThemSlideShow1(i) {
        $("#inputSlideShow1").append(`<div class="col-md-10" >
        <input type="text" value="" class="form-control" name="slideShow1" id="HinhAnh1`+i+`")"/>
            </div>
            <div class="col-md-2">
                <button type="button" onclick="chosseImage('HinhAnh1`+i+`')" class=" btn btn-primary">Chọn hình</button>
            </div>
           `);
        $("#btnThemAnh1").attr("onclick", "ThemSlideShow1(" + i + 1 + ")");

    }

</script>

<script>
    function readURL(input) {

        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#imgshow').attr('src', e.target.result);
            }
            $('#msgTBfile').html("Đã chọn file: " + input.files[0].name);

            reader.readAsDataURL(input.files[0]);
        }
    }

    $("#file-upload").change(function () {
        readURL(this);
    });
</script>
